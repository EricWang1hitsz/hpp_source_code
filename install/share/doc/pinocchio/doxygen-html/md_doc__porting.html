<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>pinocchio: Porting from Pinocchio 1.3.3 to 2.0.0</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="pinocchio.ico" rel="icon" type="image/x-icon">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/SVG"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="pinocchio.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">pinocchio
   &#160;<span id="projectnumber">2.1.3</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_doc__porting.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Porting from Pinocchio 1.3.3 to 2.0.0 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="PortingIntro"></a>
What is included</h1>
<p>This section describes how to port your code from the latest Pinocchio 1 release (1.3.3) to 2.0.</p>
<p>Note that this section does not cover API changes that were made <em>before</em> Pinocchio 1.3.3. Therefore, if you are still using an older version of Pinocchio 1, it is recommended that before you switch to 2.0 you should upgrade to 1.3.3 and make sure everything still works. In particular, remove all calls to deprecated methods and replace them appropriately.</p>
<p>The vast majority of the changes took place in C++.</p>
<h1><a class="anchor" id="PortingC"></a>
Changes in C++</h1>
<p>Although the class system was heavily re-worked, it should not make a lot of difference from the user's point of view. Relevant changes are listed below.</p>
<h2><a class="anchor" id="PortingCHeaderonly"></a>
Header-only</h2>
<p>Pinocchio is now fully header-only. This means you do not have to link to the Pinocchio library when compiling your code. On the other hand, you might need to link to additional system libraries.</p>
<h2><a class="anchor" id="PortingCNamespace"></a>
Namespace</h2>
<p>The most important change is the namespace. Now, the top-level Pinocchio namespace is not <code>se3</code> anymore, but <code>pinocchio</code>.</p>
<p>Therefore, all occurrences of <code>se3</code> in your code should be replaced by <code>pinocchio</code>.</p>
<p>If you feel like "pinocchio" is too long to type but you do not want to employ <code>using namespace pinocchio</code>, you can use </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;namespace pin = pinocchio;</div></div><!-- fragment --><p>Your code will not compile if you try to use namespace <code>se3</code>. In order to make it work, you need to compile it with the following flag </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;-DPINOCCHIO_ENABLE_COMPATIBILITY_WITH_VERSION_1</div></div><!-- fragment --><h2><a class="anchor" id="PortingCMacros"></a>
Deprecated macros</h2>
<p>The following marcos are not employed anymore </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;WITH_HPP_FCL</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;WITH_URDFDOM</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;WITH_LUA5</div></div><!-- fragment --><p> in favor of </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;PINOCCHIO_WITH_HPP_FCL</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;PINOCCHIO_WITH_URDFDOM</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;PINOCCHIO_WITH_LUA5</div></div><!-- fragment --><p> Therefore, you now need to issue the new macros in your compilation commands.</p>
<p>If you are using them in your code, in order to make them work, you can do </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;-DPINOCCHIO_ENABLE_COMPATIBILITY_WITH_VERSION_1</div></div><!-- fragment --><h2><a class="anchor" id="PortingCSignature"></a>
Method signatures</h2>
<p>Many methods which were taking a <code>ReferenceFrame = {WORLD/LOCAL}</code> enum as template parameter, such as <code>getJointJacobian</code>, are now deprecated. The reference frame is now passed as an input. For instance, you should switch from </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;getJointJacobian&lt;LOCAL&gt;(model,data,jointId,J);</div></div><!-- fragment --><p> to </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;getJointJacobian(model,data,jointId,LOCAL,J);</div></div><!-- fragment --><p>Notice that in principle your old code will still work, but you will get deprecation warnings.</p>
<h1><a class="anchor" id="PortingPython"></a>
Changes in Python</h1>
<p>Changes in Python are relatively minor.</p>
<h2><a class="anchor" id="PortingPythonNamespace"></a>
Namespace</h2>
<p>No real changes took place, but you are encouraged to stop using the idiom <code>import pinocchio as se3</code>.</p>
<p>From now on, the recommended practice is <code>import pinocchio as pin</code>.</p>
<h2><a class="anchor" id="PortingPythonRobotWrapper"></a>
RobotWrapper</h2>
<p>The constructor signature has changed from </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;__init__(self, filename, package_dirs=None, root_joint=None, verbose=False)</div></div><!-- fragment --><p> to </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;__init__(self, model = pin.Model(), collision_model = None, visual_model = None, verbose=False)</div></div><!-- fragment --><p> so that a model can be directly provided without the need of resorting to URDF. To recover the previous construction technique, you can use the static method </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;RobotWrapper.BuildFromURDF(filename, package_dirs=None, root_joint=None, verbose=False)</div></div><!-- fragment --><p>Also, the signature </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;jointJacobian(self, q, index, update_kinematics=True, local_frame=True)</div></div><!-- fragment --><p> was changed to </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;jointJacobian(self, q, index, rf_frame=pin.ReferenceFrame.LOCAL, update_kinematics=True)</div></div><!-- fragment --><p> which should not change anything if you were only ever calling it with two arguments. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Aug 20 2019 11:12:35 for pinocchio by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
