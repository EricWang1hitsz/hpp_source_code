<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>pinocchio: Main features of Pinocchio</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="pinocchio.ico" rel="icon" type="image/x-icon">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/SVG"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="pinocchio.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">pinocchio
   &#160;<span id="projectnumber">2.1.3</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_doc_a-features_intro.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Main features of Pinocchio </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Pinocchio has been written in C++ for efficiency reasons and uses the <a class="el" href="namespaceEigen.html" title="Source from #include &lt;cppad/example/cppad_eigen.hpp&gt; ">Eigen</a> library for linear algebra routines. It comes with Python bindings for easy code prototyping. We describe here the main features implemented in Pinocchio.</p>
<h2>Spatial algebra</h2>
<p>Spatial algebra is a mathematical notation commonly employed in rigid body dynamics to represent and manipulate physical quantities such as velocities, accelerations and forces. Pinocchio is based on this mathematical notation. Dedicated classes are provided to represent coordinate transformations in the 3D Euclidean space (named SE3), spatial motion vectors (Motion), spatial force vectors (Force), and spatial inertias (Inertia). Along with the available methods, this endows Pinocchio with an efficient software library for spatial algebra calculations.</p>
<h2>Model and data</h2>
<p>A fundamental paradigm of Pinocchio is the strict separation between <em>model</em> and <em>data</em>. By <em>model</em>, we mean the physical description of the robot, including kinematic and possibly inertial parameters defining its structure. This information is held by a dedicated class which, once created, is never modified by the algorithms of Pinocchio. By <em>data</em>, we mean all values which are the result of a computation. <em>Data</em> vary according to the joint configuration, velocity, etc... of the system. It contains for instance the velocity and the acceleration of each link. It also stores intermediate computations and final results of the algorithms in order to prevent memory allocation. With this splitting, all the algorithms in Pinocchio follow the signature:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;algorithm(model, data, arg1, arg2, ...)</div></div><!-- fragment --><p>where are the arguments of the function (e.g. configuration or velocity). Keeping model and data separated reduces memory footprint when performing several different tasks on the same robot, notably when this involves parallel computation. Each process can employ its own data object, while sharing the same model object. The fact that a model object never changes within an algorithm of Pinocchio enhances the predictability of the code.</p>
<p>A model can be created using the C++ API or loaded from an external file, which can be either URDF, Lua (following the RBDL standard) or Python.</p>
<h2>Supported kinematic models</h2>
<p>Within a model, a robot is represented as a kinematic tree, containing a collection of all the joints, information about their connectivity, and, optionally, the inertial quantities associated to each link. In Pinocchio a joint can have one or several degrees of freedom, and it belongs to one of the following categories:</p><ul>
<li><b>Revolute</b> joints, rotating around a fixed axis, either one of \(X,Y,Z\) or a custom one;</li>
<li><b>Prismatic</b> joints, translating along any fixed axis, as in the revolute case;</li>
<li><b>Spherical</b> joints, free rotations in the 3D space;</li>
<li><b>Translation</b> joint, for free translations in the 3D space;</li>
<li><b>Planar</b> joints, for free movements in the 2D space;</li>
<li><b>Free-floating</b> joints, for free movements in the 3D space. Planar and free-floating joints are meant to be employed as the basis of kinematic tree of mobile robots (humanoids, automated vehicles, or objects in manipulation planning).</li>
<li>More complex joints can be created as a collection of ordinary ones through the concept of <b>Composite</b> joint.</li>
</ul>
<h2>Dealing with Lie group geometry</h2>
<p>Each type of joints is characterized by its own specific configuration and tangent spaces. For instance, the configuration and tangent spaces of a revolute joint are both the real axis line \(\mathbb{R}\), while for a Spherical joint the configuration space corresponds to the set of rotation matrices of dimension 3 and its tangent space is the space of 3-dimensional real vectors \(\mathbb{R}^{3}\). Some configuration spaces might not behave as a vector space, but have to be endowed with the corresponding integration (exp) and differentiation (log) operators. Pinocchio implements all these specific integration and differentiation operators.</p>
<h2>Geometric models</h2>
<p>Aside the kinematic model, Pinocchio defines a geometric model, i.e. the volumes attached to the kinematic tree. This model can be used for displaying the robot and computing quantities associated to collisions. Like the kinematic model, the fixed quantities (placement and shape of the volumes) are stored in a <em>GeometricModel</em> object, while buffers and quantities used by associated algorithms are defined in a object. The volumes are represented using the FCL libraryÂ . Bodies of the robot are attached to each joint, while obstacles of the environment are defined in the world frame. Collision and distance algorithms for the kinematic trees are implemented, based on FCL methods.</p>
<h2>Main algorithms</h2>
<p>The implementation of the basic algorithms, including all those listed in this section, is recursive. The recursive formulation allows the software to avoid repeated computations and to exploit the sparsity induced by the kinematic tree. For the dynamics algorithms, we largely drew inspiration from Featherstone algorithms, with slight improvements.</p>
<h3>Forward kinematics</h3>
<p>Pinocchio implements direct kinematic computations up to the second order. When a robot configuration is given, a forward pass is performed to compute the spatial placements of each joint and to store them as coordinate transformations. If the velocity is given, it also computes the spatial velocities of each joint (expressed in local frame), and similarly for accelerations.</p>
<h3>Kinematic Jacobian</h3>
<p>the spatial Jacobian of each joint can be easily computed with a single forward pass, either expressed locally or in the world frame.</p>
<h3>Inverse dynamics</h3>
<p>the Recursive Newton-Euler Algorithm (RNEA) computes the inverse dynamics: given a desired robot configuration, velocity and acceleration, the torques required to execute this motion are computed and stored. The algorithm first performs a forward pass (equivalent to second-order kinematics). It then performs a backward pass, computing the wrenches transmitted along the structure and extracting the joint torques needed to obtain the computed link motions. With the appropriate inputs, this algorithm can also be employed to compute specific terms of the dynamic model, such as the gravity effects.</p>
<h3>Joint space inertia matrix</h3>
<p>the Composite Rigid Body Algorithm (CRBA) is employed to compute the joint space inertia matrix of the robot. We have implemented some slight modifications of the original algorithm that improve the computational efficiency.</p>
<h3>Forward dynamics</h3>
<p>the Articulated Body Algorithm (ABA) computes the unconstrained forward dynamics: given a robot configuration, velocity, torque and external forces, the resulting joint accelerations are computed.</p>
<h3>Additional algorithms</h3>
<p>beside the algorithms above, other methods are provided, most notably for constrained forward dynamics, impulse dynamics, inverse of the joint space inertia and centroidal dynamics.</p>
<h2>Analytical derivatives</h2>
<p>Beside proposing standard forward and inverse dynamics algorithms, Pinocchio also provides efficient implementations of their analytical derivatives. These derivatives are for instance of primary importance in the context of whole-body trajectory optimization or more largely, for numerical optimal control. To the best of our knowledge, Pinocchio is the first rigid body framework which implements this feature natively.</p>
<h2>Automatic differentiation and source code generation</h2>
<p>In addition to analytical derivatives, Pinocchio supports automatic differentiation. This is made possible through the full <em>scalar</em> templatization of the whole C++ code and the use of any external library that does automatic differentiation: ADOL-C, CasADi, <a class="el" href="namespaceCppAD.html" title="Source from #include &lt;cppad/example/cppad_eigen.hpp&gt; ">CppAD</a> and others. It is important to keep in mind that these automatic derivatives are often much slower than the analytical ones.</p>
<p>Another unique but central feature of Pinocchio is its ability to generate code both at compile time and at runtime. This is achieved by using another external toolbox called CppADCodeGen built on top of <a class="el" href="namespaceCppAD.html" title="Source from #include &lt;cppad/example/cppad_eigen.hpp&gt; ">CppAD</a>. From any function using Pinocchio, CppADCodeGen is able to generate on the fly its code in various languages: C, Latex, etc. and to make some simplifications of the math expressions. Thanks to this procedure, a code tailored for a specific robot model can be generated and used externally to Pinocchio.</p>
<ul>
<li><a class="el" href="md_doc_a-features_a-spatial.html">Spatial Algebra module</a></li>
<li><a class="el" href="md_doc_a-features_b-model-data.html">Model and data</a></li>
<li><a class="el" href="md_doc_a-features_c-joints.html">Joints</a></li>
<li><a class="el" href="md_doc_a-features_d-model.html">Loading the model</a></li>
<li><a class="el" href="md_doc_a-features_e-lie.html">Dealing with Lie group geometry</a></li>
<li><a class="el" href="md_doc_a-features_f-kinematic.html">Kinematic algorithms</a></li>
<li><a class="el" href="md_doc_a-features_g-dynamic.html">Dynamc algorithms</a></li>
<li><a class="el" href="md_doc_a-features_h-frames.html">Operational frames</a></li>
<li><a class="el" href="md_doc_a-features_i-geometric-models.html">Geometric models</a></li>
<li><a class="el" href="md_doc_a-features_j-analytical-derivatives.html">Analytical derivatives</a></li>
<li><a class="el" href="md_doc_a-features_k-automatic-differentiation.html">Automatic differentiation and source code generation</a></li>
<li><a class="el" href="md_doc_a-features_l-python.html">Python bindings</a></li>
<li><a class="el" href="md_doc_a-features_m-tests.html">Unit tests</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Aug 20 2019 11:12:35 for pinocchio by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
